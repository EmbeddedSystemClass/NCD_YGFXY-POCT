/***************************************************************************************************
*FileName:SDFunction
*Description:一些SD卡的操作函数
*Author:xsx
*Data:2016年4月30日16:06:36
***************************************************************************************************/


/***************************************************************************************************/
/******************************************头文件***************************************************/
/***************************************************************************************************/
#include	"Universal_Fun.h"

#include	"System_Data.h"
#include	"DS18b20_Driver.h"
#include	"RTC_Driver.h"


/***************************************************************************************************/
/**************************************局部变量声明*************************************************/
/***************************************************************************************************/

/***************************************************************************************************/
/**************************************局部函数声明*************************************************/
/***************************************************************************************************/





/***************************************************************************************************/
/***************************************************************************************************/
/***************************************正文********************************************************/
/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/


void UpDateGB_Time(void)
{
	DateTime time ;
	
	if(My_Pass == RTC_GetTimeData(&time))
		setSystemDateTime(&time);
}

void ReadEnvironmentTemperature(void)
{
	static unsigned char index = 0;
	float tempv = 0;

	if(index % 2 == 0)
	{
		startDS18B20();
	}
	else
	{
		tempv = readDS18B20Temp();
		if(tempv != 300)
			setSystemEnTemperature(tempv);
	}
	
	index++;
}
