/***************************************************************************************************
*FileName:
*Description:
*Author: xsx_kair
*Data:
***************************************************************************************************/

/***************************************************************************************************/
/******************************************Header List********************************************/
/***************************************************************************************************/
#include	"Motor_Fun.h"
#include	"Timer4_Driver.h"
#include	"CardLimit_Driver.h"
#include	"DRV8825_Driver.h"
#include	"System_Data.h"

#include 	"FreeRTOS.h"
#include 	"task.h"
#include 	"queue.h"
#include	"semphr.h"

#include	<string.h>
#include	"stdio.h"
#include 	"stdlib.h"
/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

unsigned char motorstautes = 0;
/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/
/****************************************File Start*************************************************/
/***************************************************************************************************/
/***************************************************************************************************/



void MotorMoveTo(unsigned int location, unsigned char mode)
{
	setSystemMotorTargetLocation(location);
	
	if(getSystemRunTimeData()->motorData.targetLocation > getSystemRunTimeData()->motorData.location)
		SetDRVDir(Forward);
	else
		SetDRVDir(Reverse);
	
	motorstautes = 1;
	StartTimer4();
	if(mode == 0)
	{
		while(1 == motorstautes)
			vTaskDelay(1 / portTICK_RATE_MS);;
	}
}

void StopMotor(void)
{
	StopTimer4();
}
/****************************************end of file************************************************/

